import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{h as K,x as X,aD as st,y as b,A as W,z as i,ab as e,ac as a,aa as O,ad as k,B as it,C as f,D as Y,t as s,Q as H,T as P,ax as rt,a7 as nt,F as q,ay as L}from"../chunks/DS9Sz7so.js";import{i as Q}from"../chunks/B6fPwgly.js";import{i as Z}from"../chunks/4X_O6Izh.js";import{g as R}from"../chunks/Cka-Znw6.js";import{O as tt,P as U,S as J,C as j}from"../chunks/C-GZBWq4.js";import{t as lt,s as ot,c as vt}from"../chunks/5vYsX0vN.js";import{p as M,u as ct}from"../chunks/DjdoUdnJ.js";function ut(v,l,t,_){var h=v.__style;if(K||h!==l){var g=lt(l);(!K||g!==v.getAttribute("style"))&&(g==null?v.removeAttribute("style"):v.style.cssText=g),v.__style=l}return _}function dt(v){const l=Number(v),t=new Date(l);return{data:t.toLocaleDateString("it-IT"),ora:t.toLocaleTimeString("it-IT")}}var _t=b('<img src="/icons/sushi.png" alt=""/>'),gt=b('<!> <div class="counter svelte-10nb5vq"><div class="svelte-10nb5vq"><div class="count-display special_font svelte-10nb5vq"> </div></div></div>',1);function E(v,l){X(l,!1);const t=st();let _=M(l,"count",12,0),h=M(l,"image",8,!0),g=M(l,"imageWidth",8,"220px"),p=H(!1);function w(){P(p,!1),requestAnimationFrame(()=>{P(p,!0),setTimeout(()=>P(p,!1),300)})}function I(){ct(_),w(),t("valueischanged",{value:_()})}Z();var A=gt(),y=W(A);{var B=x=>{var N=_t();O(()=>{ut(N,`max-width: ${g()};`),ot(N,1,vt(s(p)?"animate":""),"svelte-10nb5vq")}),f(x,N)};Q(y,x=>{h()&&x(B)})}var C=i(y,2),T=e(C),z=e(T),F=e(z,!0);a(z),a(T),a(C),O(()=>k(F,_())),it("click",T,I),f(v,A),Y()}function V(){j(),localStorage.removeItem("fight"),R("/")}var mt=()=>tt("annulla"),pt=()=>tt("annulla"),ft=b('<div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div>'),bt=b('<div class="flex_2 center svelte-1vg7szd"><div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div> <div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div></div>'),ht=b('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),yt=b('<h2>Concludi combattimento</h2> Sei sicuro di voler concludere il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si concludi</button> <button class="glass"><!> No continua</button></div>',1),xt=b('<div class="flex"><button class="glass"><img src="/icons/sushi.png" alt=""/> Annulla Combattimento</button> <button class="glass"><img src="/icons/sushi.png" alt=""/> Concludi Combattimento</button></div> <div class="flex"><div class="glass center svelte-1vg7szd">Turno iniziato il &nbsp;<b> </b>&nbsp;alle&nbsp;<b> </b></div></div> <!> <!> <!> <!>',1);function Dt(v,l){X(l,!1);let t=H({players:[]}),_=H({data:"--/--/--",ora:"00:00"});nt(()=>{if(!localStorage.getItem("fight"))R("/");else{const r=localStorage.getItem("fight");P(t,r?JSON.parse(r):null),P(_,dt(s(t).start_time)),(!s(t).players.every(c=>c.username!="")||!s(t).players.length)&&R("/")}}),Z();var h=xt(),g=W(h),p=e(g);p.__click=[mt];var w=i(p,2);w.__click=[pt],a(g);var I=i(g,2),A=e(I),y=i(e(A)),B=e(y,!0);a(y);var C=i(y,2),T=e(C,!0);a(C),a(A),a(I);var z=i(I,2);{var F=r=>{var c=ft(),o=e(c);E(o,{get count(){return s(t).players[0].pieces},set count(m){L(t,s(t).players[0].pieces=m)},$$events:{valueischanged:m=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var u=i(o,4),n=e(u,!0);a(u),a(c),O(()=>k(n,s(t).players[0].username)),f(r,c)};Q(z,r=>{s(t).players.length==1&&r(F)})}var x=i(z,2);{var N=r=>{var c=bt(),o=e(c),u=e(o);E(u,{imageWidth:"150px",get count(){return s(t).players[0].pieces},set count(D){L(t,s(t).players[0].pieces=D)},$$events:{valueischanged:D=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var n=i(u,4),m=e(n,!0);a(n),a(o);var d=i(o,2),S=e(d);E(S,{imageWidth:"150px",get count(){return s(t).players[1].pieces},set count(D){L(t,s(t).players[1].pieces=D)},$$events:{valueischanged:D=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var $=i(S,4),at=e($,!0);a($),a(d),a(c),O(()=>{k(m,s(t).players[0].username),k(at,s(t).players[1].username)}),f(r,c)};Q(x,r=>{s(t).players.length==2&&r(N)})}var G=i(x,2);U(G,{name:"annulla",children:(r,c)=>{var o=ht(),u=i(W(o),5),n=e(u);n.__click=[V];var m=e(n);J(m,{n:3}),q(),a(n);var d=i(n,2);d.__click=function(...$){j?.apply(this,$)};var S=e(d);J(S,{n:5}),q(),a(d),a(u),f(r,o)},$$slots:{default:!0}});var et=i(G,2);U(et,{name:"annulla",children:(r,c)=>{var o=yt(),u=i(W(o),5),n=e(u);n.__click=[V];var m=e(n);J(m,{n:3}),q(),a(n);var d=i(n,2);d.__click=function(...$){j?.apply(this,$)};var S=e(d);J(S,{n:5}),q(),a(d),a(u),f(r,o)},$$slots:{default:!0}}),O(()=>{k(B,s(_).data),k(T,s(_).ora)}),f(v,h),Y()}rt(["click"]);export{Dt as component};
