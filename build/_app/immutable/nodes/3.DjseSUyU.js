import"../chunks/DsnmJJEf.js";import"../chunks/CkWC5WR6.js";import{c as st,a as k,e as it,d as rt,o as nt}from"../chunks/CmdHNy9g.js";import{h as K,y as X,z as b,B as W,A as i,a9 as e,aa as a,a8 as P,C as f,D as Y,t as s,Q as E,R as q,F as D,au as L}from"../chunks/D-t4iP9I.js";import{i as H}from"../chunks/BdhU6ucl.js";import{i as Z}from"../chunks/CuoYiiP9.js";import{g as Q}from"../chunks/DxNaWtKZ.js";import{O as tt,P as U,S as J,C as j}from"../chunks/Ds6WYR1n.js";import{t as lt,s as ot,c as vt}from"../chunks/DjQAC1CF.js";import{p as M,u as ct}from"../chunks/D8BIcSb0.js";function ut(v,l,t,g){var h=v.__style;if(K||h!==l){var _=lt(l);(!K||_!==v.getAttribute("style"))&&(_==null?v.removeAttribute("style"):v.style.cssText=_),v.__style=l}return g}function dt(v){const l=Number(v),t=new Date(l);return{data:t.toLocaleDateString("it-IT"),ora:t.toLocaleTimeString("it-IT")}}var gt=b('<img src="/icons/sushi.png" alt=""/>'),_t=b('<!> <div class="counter svelte-10nb5vq"><button class="svelte-10nb5vq"><div class="count-display special_font svelte-10nb5vq"> </div></button></div>',1);function R(v,l){X(l,!1);const t=st();let g=M(l,"count",12,0),h=M(l,"image",8,!0),_=M(l,"imageWidth",8,"220px"),p=E(!1);function w(){q(p,!1),requestAnimationFrame(()=>{q(p,!0),setTimeout(()=>q(p,!1),300)})}function I(){ct(g),w(),t("valueischanged",{value:g()})}Z();var A=_t(),y=W(A);{var B=x=>{var T=gt();P(()=>{ut(T,`max-width: ${_()};`),ot(T,1,vt(s(p)?"animate":""),"svelte-10nb5vq")}),f(x,T)};H(y,x=>{h()&&x(B)})}var C=i(y,2),z=e(C),N=e(z),F=e(N,!0);a(N),a(z),a(C),P(()=>k(F,g())),it("click",z,I),f(v,A),Y()}function V(){j(),localStorage.removeItem("fight"),Q("/")}var mt=()=>tt("annulla"),pt=()=>tt("annulla"),ft=b('<div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div>'),bt=b('<div class="flex_2 center svelte-1vg7szd"><div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div> <div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div></div>'),ht=b('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),yt=b('<h2>Concludi combattimento</h2> Sei sicuro di voler concludere il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si concludi</button> <button class="glass"><!> No continua</button></div>',1),xt=b('<div class="flex"><button class="glass"><img src="/icons/sushi.png" alt=""/> Annulla Combattimento</button> <button class="glass"><img src="/icons/sushi.png" alt=""/> Concludi Combattimento</button></div> <div class="flex"><div class="glass center svelte-1vg7szd">Turno iniziato il &nbsp;<b> </b>&nbsp;alle&nbsp;<b> </b></div></div> <!> <!> <!> <!>',1);function Pt(v,l){X(l,!1);let t=E({players:[]}),g=E({data:"--/--/--",ora:"00:00"});nt(()=>{if(!localStorage.getItem("fight"))Q("/");else{const r=localStorage.getItem("fight");q(t,r?JSON.parse(r):null),q(g,dt(s(t).start_time)),(!s(t).players.every(c=>c.username!="")||!s(t).players.length)&&Q("/")}}),Z();var h=xt(),_=W(h),p=e(_);p.__click=[mt];var w=i(p,2);w.__click=[pt],a(_);var I=i(_,2),A=e(I),y=i(e(A)),B=e(y,!0);a(y);var C=i(y,2),z=e(C,!0);a(C),a(A),a(I);var N=i(I,2);{var F=r=>{var c=ft(),o=e(c);R(o,{get count(){return s(t).players[0].pieces},set count(m){L(t,s(t).players[0].pieces=m)},$$events:{valueischanged:m=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var u=i(o,4),n=e(u,!0);a(u),a(c),P(()=>k(n,s(t).players[0].username)),f(r,c)};H(N,r=>{s(t).players.length==1&&r(F)})}var x=i(N,2);{var T=r=>{var c=bt(),o=e(c),u=e(o);R(u,{imageWidth:"150px",get count(){return s(t).players[0].pieces},set count(O){L(t,s(t).players[0].pieces=O)},$$events:{valueischanged:O=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var n=i(u,4),m=e(n,!0);a(n),a(o);var d=i(o,2),S=e(d);R(S,{imageWidth:"150px",get count(){return s(t).players[1].pieces},set count(O){L(t,s(t).players[1].pieces=O)},$$events:{valueischanged:O=>localStorage.setItem("fight",JSON.stringify(s(t)))},$$legacy:!0});var $=i(S,4),at=e($,!0);a($),a(d),a(c),P(()=>{k(m,s(t).players[0].username),k(at,s(t).players[1].username)}),f(r,c)};H(x,r=>{s(t).players.length==2&&r(T)})}var G=i(x,2);U(G,{name:"annulla",children:(r,c)=>{var o=ht(),u=i(W(o),5),n=e(u);n.__click=[V];var m=e(n);J(m,{n:3}),D(),a(n);var d=i(n,2);d.__click=function(...$){j?.apply(this,$)};var S=e(d);J(S,{n:5}),D(),a(d),a(u),f(r,o)},$$slots:{default:!0}});var et=i(G,2);U(et,{name:"annulla",children:(r,c)=>{var o=yt(),u=i(W(o),5),n=e(u);n.__click=[V];var m=e(n);J(m,{n:3}),D(),a(n);var d=i(n,2);d.__click=function(...$){j?.apply(this,$)};var S=e(d);J(S,{n:5}),D(),a(d),a(u),f(r,o)},$$slots:{default:!0}}),P(()=>{k(B,s(g).data),k(z,s(g).ora)}),f(v,h),Y()}rt(["click"]);export{Pt as component};
