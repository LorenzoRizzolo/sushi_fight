import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{b as fa,h as N,a as ca,t as w,$ as ea,r as da,H as _a,s as Z,c as G,d as F,k as D,ae as ma,af as ha,f as U,i as pa,g as O,ag as ga,e as ba,Q as ra,ah as j,ai as ta,aj as ya,ak as Ea,j as na,p as xa,al as Ia,am as Sa,an as J,ao as la,ap as ka,aq as Aa,ar as Ta,as as wa,Z as Ca,at as Na,au as Ma,n as $a,av as Oa,aw as Ra,ax as Da,x as Ha,a7 as Pa,y as V,A as L,ab as I,z as A,C as z,D as za,T as Va,F as M,ac as S,ay as qa}from"../chunks/DS9Sz7so.js";import{r as Ba}from"../chunks/D6TuE4fJ.js";import{i as Fa}from"../chunks/4X_O6Izh.js";import{g as q}from"../chunks/Cka-Znw6.js";import{S as $,O as sa,P as aa,C as W,R as Ja}from"../chunks/C-GZBWq4.js";function La(e,r){return r}function Ya(e,r,a){for(var u=e.items,v=[],s=r.length,c=0;c<s;c++)Aa(r[c].e,v,!0);var _=s>0&&v.length===0&&a!==null;if(_){var h=a.parentNode;Ta(h),h.append(a),u.clear(),k(e,r[0].prev,r[s-1].next)}wa(v,()=>{for(var y=0;y<s;y++){var p=r[y];_||(u.delete(p.k),k(e,p.prev,p.next)),la(p.e,!_)}})}function Ka(e,r,a,u,v,s=null){var c=e,_={flags:r,items:new Map,first:null};N&&ca();var h=null,y=!1,p=new Map,T=ea(()=>{var t=a();return ya(t)?t:t==null?[]:ta(t)}),n,g;function l(){Qa(g,n,_,p,c,v,r,u,a),s!==null&&(n.length===0?h?na(h):h=U(()=>s(c)):h!==null&&xa(h,()=>{h=null}))}fa(()=>{g??=Ca,n=w(T);var t=n.length;if(y&&t===0)return;y=t===0;let d=!1;if(N){var b=da(c)===_a;b!==(t===0)&&(c=Z(),G(c),F(!1),d=!0)}if(N){for(var f=null,i,o=0;o<t;o++){if(D.nodeType===ma&&D.data===ha){c=D,d=!0,F(!1);break}var m=n[o],E=u(m,o);i=X(D,_,f,null,m,E,o,v,r,a),_.items.set(E,i),f=i}t>0&&G(Z())}if(N)t===0&&s&&(h=U(()=>s(c)));else if(pa()){var H=new Set,C=O;for(o=0;o<t;o+=1){m=n[o],E=u(m,o);var x=_.items.get(E)??p.get(E);x?ia(x,m,o):(i=X(null,_,null,null,m,E,o,v,r,a,!0),p.set(E,i)),H.add(E)}for(const[P,R]of _.items)H.has(P)||C.skipped_effects.add(R.e);C.add_callback(l)}else l();d&&F(!0),w(T)}),N&&(c=D)}function Qa(e,r,a,u,v,s,c,_,h){var y=r.length,p=a.items,T=a.first,n=T,g,l=null,t=[],d=[],b,f,i,o;for(o=0;o<y;o+=1){if(b=r[o],f=_(b,o),i=p.get(f),i===void 0){var m=u.get(f);if(m!==void 0){u.delete(f),p.set(f,m);var E=l?l.next:n;k(a,l,m),k(a,m,E),Y(m,E,v),l=m}else{var H=n?n.e.nodes_start:v;l=X(H,a,l,l===null?a.first:l.next,b,f,o,s,c,h)}p.set(f,l),t=[],d=[],n=l.next;continue}if(ia(i,b,o),(i.e.f&J)!==0&&na(i.e),i!==n){if(g!==void 0&&g.has(i)){if(t.length<d.length){var C=d[0],x;l=C.prev;var P=t[0],R=t[t.length-1];for(x=0;x<t.length;x+=1)Y(t[x],C,v);for(x=0;x<d.length;x+=1)g.delete(d[x]);k(a,P.prev,R.next),k(a,l,P),k(a,R,C),n=C,l=R,o-=1,t=[],d=[]}else g.delete(i),Y(i,n,v),k(a,i.prev,i.next),k(a,i,l===null?a.first:l.next),k(a,l,i),l=i;continue}for(t=[],d=[];n!==null&&n.k!==f;)(n.e.f&J)===0&&(g??=new Set).add(n),d.push(n),n=n.next;if(n===null)continue;i=n}t.push(i),l=i,n=i.next}if(n!==null||g!==void 0){for(var B=g===void 0?[]:ta(g);n!==null;)(n.e.f&J)===0&&B.push(n),n=n.next;var oa=B.length;if(oa>0){var va=null;Ya(a,B,va)}}e.first=a.first&&a.first.e,e.last=l&&l.e;for(var ua of u.values())la(ua.e);u.clear()}function ia(e,r,a,u){ga(e.v,r),e.i=a}function X(e,r,a,u,v,s,c,_,h,y,p){var T=(h&Ia)!==0,n=(h&Sa)===0,g=T?n?ra(v,!1,!1):j(v):v,l=(h&Ea)===0?c:j(c),t={i:l,v:g,k:s,a:null,e:null,prev:a,next:u};try{if(e===null){var d=document.createDocumentFragment();d.append(e=ba())}return t.e=U(()=>_(e,g,l,y),N),t.e.prev=a&&a.e,t.e.next=u&&u.e,a===null?p||(r.first=t):(a.next=t,a.e.next=t.e),u!==null&&(u.prev=t,u.e.prev=t.e),t}finally{}}function Y(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,v=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==u;){var c=ka(s);v.before(s),s=c}}function k(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function Ua(e,r,a=r){var u=new WeakSet;Na(e,"input",async v=>{var s=v?e.defaultValue:e.value;if(s=K(e)?Q(s):s,a(s),O!==null&&u.add(O),await Ma(),s!==(s=r())){var c=e.selectionStart,_=e.selectionEnd;e.value=s??"",_!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(_,e.value.length))}}),(N&&e.defaultValue!==e.value||$a(r)==null&&e.value)&&(a(K(e)?Q(e.value):e.value),O!==null&&u.add(O)),Oa(()=>{var v=r();if(e===document.activeElement){var s=Ra??O;if(u.has(s))return}K(e)&&v===Q(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function K(e){var r=e.type;return r==="number"||r==="range"}function Q(e){return e===""?null:+e}function Wa(){q("/number_fighter")}function Xa(){W(),q("/")}function Za(e,r){w(r).players.every(a=>a.username!="")?(localStorage.setItem("fight",JSON.stringify(w(r))),q("/fight")):sa("error")}var Ga=()=>sa("annulla"),ja=V('<div class="flex fighter svelte-ct5v22"><div class="glass icon svelte-ct5v22"><!></div> <input type="text" placeholder="username..." class="svelte-ct5v22"/></div>'),ae=V('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),ee=V('Completa tutti i nomi prima di iniziare! <br/><br/> <div class="flex"><button class="glass"><!> OK</button></div>',1),re=V('<div class="flex"><button class="glass"><!> Cambia numero partecipanti</button> <button class="glass"><!> Annulla</button></div> <div class="title"><h2>Inserisci i nomi dei partecipanti</h2></div> <!> <br/> <div class="center"><button class="glass big special_font svelte-ct5v22"><img src="/icons/sushi.png" alt=""/> Inizia a Combattere</button></div> <!> <!>',1);function ue(e,r){Ha(r,!1);let a=ra([]);Pa(()=>{if(!localStorage.getItem("fight"))q("/");else{const l=localStorage.getItem("fight");Va(a,l?JSON.parse(l):null)}}),Fa();var u=re(),v=L(u),s=I(v);s.__click=[Wa];var c=I(s);$(c,{n:1}),M(),S(s);var _=A(s,2);_.__click=[Ga];var h=I(_);$(h,{n:2}),M(),S(_),S(v);var y=A(v,4);Ka(y,1,()=>w(a).players,La,(l,t,d)=>{var b=ja(),f=I(b),i=I(f);{let m=ea(Ja);$(i,{get n(){return w(m)}})}S(f);var o=A(f,2);Ba(o),S(b),Ua(o,()=>w(a).players[d].username,m=>qa(a,w(a).players[d].username=m)),z(l,b)});var p=A(y,4),T=I(p);T.__click=[Za,a],S(p);var n=A(p,2);aa(n,{name:"annulla",children:(l,t)=>{var d=ae(),b=A(L(d),5),f=I(b);f.__click=[Xa];var i=I(f);$(i,{n:3}),M(),S(f);var o=A(f,2);o.__click=function(...E){W?.apply(this,E)};var m=I(o);$(m,{n:5}),M(),S(o),S(b),z(l,d)},$$slots:{default:!0}});var g=A(n,2);aa(g,{name:"error",children:(l,t)=>{M();var d=ee(),b=A(L(d),4),f=I(b);f.__click=function(...o){W?.apply(this,o)};var i=I(f);$(i,{n:5}),M(),S(f),S(b),z(l,d)},$$slots:{default:!0}}),z(e,u),za()}Da(["click"]);export{ue as component};
