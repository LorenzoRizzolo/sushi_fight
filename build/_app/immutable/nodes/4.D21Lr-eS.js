import"../chunks/DsnmJJEf.js";import"../chunks/CkWC5WR6.js";import{d as fa,o as ca}from"../chunks/CmdHNy9g.js";import{b as da,h as N,a as _a,t as T,Z as ea,r as ma,H as ha,s as Z,c as G,d as F,k as D,ab as pa,ac as ga,f as Q,i as ba,g as O,ad as Ea,e as ya,Q as ra,ae as j,af as ta,ag as Ia,ah as Sa,j as na,p as xa,ai as ka,aj as Aa,ak as J,al as la,am as Ca,an as Ta,ao as wa,ap as Na,X as Ma,aq as Ra,ar as Oa,n as $a,as as Da,at as Ha,y as Pa,z as V,B as L,a9 as S,A,C as z,D as za,R as Va,F as M,aa as x,au as Ba}from"../chunks/D-t4iP9I.js";import{r as qa}from"../chunks/k96GuqOm.js";import{i as Fa}from"../chunks/CuoYiiP9.js";import{g as B}from"../chunks/DFDWIOgt.js";import{S as R,O as sa,P as aa,C as U,R as Ja}from"../chunks/Ds6WYR1n.js";function La(e,r){return r}function Xa(e,r,a){for(var u=e.items,v=[],s=r.length,c=0;c<s;c++)Ta(r[c].e,v,!0);var _=s>0&&v.length===0&&a!==null;if(_){var h=a.parentNode;wa(h),h.append(a),u.clear(),k(e,r[0].prev,r[s-1].next)}Na(v,()=>{for(var E=0;E<s;E++){var p=r[E];_||(u.delete(p.k),k(e,p.prev,p.next)),la(p.e,!_)}})}function Ya(e,r,a,u,v,s=null){var c=e,_={flags:r,items:new Map,first:null};N&&_a();var h=null,E=!1,p=new Map,C=ea(()=>{var t=a();return Ia(t)?t:t==null?[]:ta(t)}),n,g;function l(){Ka(g,n,_,p,c,v,r,u,a),s!==null&&(n.length===0?h?na(h):h=Q(()=>s(c)):h!==null&&xa(h,()=>{h=null}))}da(()=>{g??=Ma,n=T(C);var t=n.length;if(E&&t===0)return;E=t===0;let d=!1;if(N){var b=ma(c)===ha;b!==(t===0)&&(c=Z(),G(c),F(!1),d=!0)}if(N){for(var f=null,i,o=0;o<t;o++){if(D.nodeType===pa&&D.data===ga){c=D,d=!0,F(!1);break}var m=n[o],y=u(m,o);i=W(D,_,f,null,m,y,o,v,r,a),_.items.set(y,i),f=i}t>0&&G(Z())}if(N)t===0&&s&&(h=Q(()=>s(c)));else if(ba()){var H=new Set,w=O;for(o=0;o<t;o+=1){m=n[o],y=u(m,o);var I=_.items.get(y)??p.get(y);I?ia(I,m,o):(i=W(null,_,null,null,m,y,o,v,r,a,!0),p.set(y,i)),H.add(y)}for(const[P,$]of _.items)H.has(P)||w.skipped_effects.add($.e);w.add_callback(l)}else l();d&&F(!0),T(C)}),N&&(c=D)}function Ka(e,r,a,u,v,s,c,_,h){var E=r.length,p=a.items,C=a.first,n=C,g,l=null,t=[],d=[],b,f,i,o;for(o=0;o<E;o+=1){if(b=r[o],f=_(b,o),i=p.get(f),i===void 0){var m=u.get(f);if(m!==void 0){u.delete(f),p.set(f,m);var y=l?l.next:n;k(a,l,m),k(a,m,y),X(m,y,v),l=m}else{var H=n?n.e.nodes_start:v;l=W(H,a,l,l===null?a.first:l.next,b,f,o,s,c,h)}p.set(f,l),t=[],d=[],n=l.next;continue}if(ia(i,b,o),(i.e.f&J)!==0&&na(i.e),i!==n){if(g!==void 0&&g.has(i)){if(t.length<d.length){var w=d[0],I;l=w.prev;var P=t[0],$=t[t.length-1];for(I=0;I<t.length;I+=1)X(t[I],w,v);for(I=0;I<d.length;I+=1)g.delete(d[I]);k(a,P.prev,$.next),k(a,l,P),k(a,$,w),n=w,l=$,o-=1,t=[],d=[]}else g.delete(i),X(i,n,v),k(a,i.prev,i.next),k(a,i,l===null?a.first:l.next),k(a,l,i),l=i;continue}for(t=[],d=[];n!==null&&n.k!==f;)(n.e.f&J)===0&&(g??=new Set).add(n),d.push(n),n=n.next;if(n===null)continue;i=n}t.push(i),l=i,n=i.next}if(n!==null||g!==void 0){for(var q=g===void 0?[]:ta(g);n!==null;)(n.e.f&J)===0&&q.push(n),n=n.next;var oa=q.length;if(oa>0){var va=null;Xa(a,q,va)}}e.first=a.first&&a.first.e,e.last=l&&l.e;for(var ua of u.values())la(ua.e);u.clear()}function ia(e,r,a,u){Ea(e.v,r),e.i=a}function W(e,r,a,u,v,s,c,_,h,E,p){var C=(h&ka)!==0,n=(h&Aa)===0,g=C?n?ra(v,!1,!1):j(v):v,l=(h&Sa)===0?c:j(c),t={i:l,v:g,k:s,a:null,e:null,prev:a,next:u};try{if(e===null){var d=document.createDocumentFragment();d.append(e=ya())}return t.e=Q(()=>_(e,g,l,E),N),t.e.prev=a&&a.e,t.e.next=u&&u.e,a===null?p||(r.first=t):(a.next=t,a.e.next=t.e),u!==null&&(u.prev=t,u.e.prev=t.e),t}finally{}}function X(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,v=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==u;){var c=Ca(s);v.before(s),s=c}}function k(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function Qa(e,r,a=r){var u=new WeakSet;Ra(e,"input",async v=>{var s=v?e.defaultValue:e.value;if(s=Y(e)?K(s):s,a(s),O!==null&&u.add(O),await Oa(),s!==(s=r())){var c=e.selectionStart,_=e.selectionEnd;e.value=s??"",_!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(_,e.value.length))}}),(N&&e.defaultValue!==e.value||$a(r)==null&&e.value)&&(a(Y(e)?K(e.value):e.value),O!==null&&u.add(O)),Da(()=>{var v=r();if(e===document.activeElement){var s=Ha??O;if(u.has(s))return}Y(e)&&v===K(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function Y(e){var r=e.type;return r==="number"||r==="range"}function K(e){return e===""?null:+e}function Ua(){B("/number_fighter")}function Wa(){U(),B("/")}function Za(e,r){T(r).players.every(a=>a.username!="")?(localStorage.setItem("fight",JSON.stringify(T(r))),B("/fight")):sa("error")}var Ga=()=>sa("annulla"),ja=V('<div class="flex fighter svelte-ct5v22"><div class="glass icon svelte-ct5v22"><!></div> <input type="text" placeholder="username..." class="svelte-ct5v22"/></div>'),ae=V('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),ee=V('Completa tutti i nomi prima di iniziare! <br/><br/> <div class="flex"><button class="glass"><!> OK</button></div>',1),re=V('<div class="flex"><button class="glass"><!> Cambia numero partecipanti</button> <button class="glass"><!> Annulla</button></div> <div class="title"><h2>Inserisci i nomi dei partecipanti</h2></div> <!> <br/> <div class="center"><button class="glass big special_font svelte-ct5v22"><img src="/icons/sushi.png" alt=""/> Inizia a Combattere</button></div> <!> <!>',1);function fe(e,r){Pa(r,!1);let a=ra([]);ca(()=>{if(!localStorage.getItem("fight"))B("/");else{const l=localStorage.getItem("fight");Va(a,l?JSON.parse(l):null)}}),Fa();var u=re(),v=L(u),s=S(v);s.__click=[Ua];var c=S(s);R(c,{n:1}),M(),x(s);var _=A(s,2);_.__click=[Ga];var h=S(_);R(h,{n:2}),M(),x(_),x(v);var E=A(v,4);Ya(E,1,()=>T(a).players,La,(l,t,d)=>{var b=ja(),f=S(b),i=S(f);{let m=ea(Ja);R(i,{get n(){return T(m)}})}x(f);var o=A(f,2);qa(o),x(b),Qa(o,()=>T(a).players[d].username,m=>Ba(a,T(a).players[d].username=m)),z(l,b)});var p=A(E,4),C=S(p);C.__click=[Za,a],x(p);var n=A(p,2);aa(n,{name:"annulla",children:(l,t)=>{var d=ae(),b=A(L(d),5),f=S(b);f.__click=[Wa];var i=S(f);R(i,{n:3}),M(),x(f);var o=A(f,2);o.__click=function(...y){U?.apply(this,y)};var m=S(o);R(m,{n:5}),M(),x(o),x(b),z(l,d)},$$slots:{default:!0}});var g=A(n,2);aa(g,{name:"error",children:(l,t)=>{M();var d=ee(),b=A(L(d),4),f=S(b);f.__click=function(...o){U?.apply(this,o)};var i=S(f);R(i,{n:5}),M(),x(f),x(b),z(l,d)},$$slots:{default:!0}}),z(e,u),za()}fa(["click"]);export{fe as component};
