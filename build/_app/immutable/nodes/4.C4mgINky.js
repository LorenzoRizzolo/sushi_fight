import"../chunks/DsnmJJEf.js";import{i as V}from"../chunks/DDgjhNLN.js";import{h as Q,l as X,aF as at,m as b,o as J,n as i,y as a,C as s,D as q,F as k,q as st,t as f,u as Y,B as e,A as j,z as D,w as it,x as rt,v as P,aA as W}from"../chunks/BA1ZpzL_.js";import{i as G}from"../chunks/D-9wR-w5.js";import{g as F}from"../chunks/us4BbbAT.js";import{O as Z,P as U,S as w,C as B}from"../chunks/DJnbM7KC.js";import{t as nt,s as lt,c as ot}from"../chunks/BPZIPSPX.js";import{p as H,u as vt}from"../chunks/CDa04buL.js";function ct(o,r,t,g){var h=o.__style;if(Q||h!==r){var _=nt(r);(!Q||_!==o.getAttribute("style"))&&(_==null?o.removeAttribute("style"):o.style.cssText=_),o.__style=r}return g}function ut(o){const r=Number(o),t=new Date(r);return{data:t.toLocaleDateString("it-IT"),ora:t.toLocaleTimeString("it-IT")}}var dt=b('<img src="/icons/sushi.png" alt=""/>'),gt=b('<!> <div class="counter svelte-10nb5vq"><div class="svelte-10nb5vq"><div class="count-display special_font svelte-10nb5vq"> </div></div></div>',1);function R(o,r){X(r,!1);const t=at();let g=H(r,"count",12,0),h=H(r,"image",8,!0),_=H(r,"imageWidth",8,"220px"),p=j(!1);function L(){D(p,!1),requestAnimationFrame(()=>{D(p,!0),setTimeout(()=>D(p,!1),300)})}function I(){vt(g),L(),t("valueischanged",{value:g()})}V();var A=gt(),y=J(A);{var M=x=>{var O=dt();q(()=>{ct(O,`max-width: ${_()};`),lt(O,1,ot(e(p)?"animate":""),"svelte-10nb5vq")}),f(x,O)};G(y,x=>{h()&&x(M)})}var C=i(y,2),N=a(C),z=a(N),E=a(z,!0);s(z),s(N),s(C),q(()=>k(E,g())),st("click",N,I),f(o,A),Y()}function _t(){B(),localStorage.removeItem("fight"),F("/")}function mt(o,r){B(),W(r,e(r).end_time=Date.now()),localStorage.setItem("fight",JSON.stringify(e(r))),F("/congrats")}var pt=()=>Z("annulla"),ft=()=>Z("concludi"),bt=b('<div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div>'),ht=b('<div class="flex_2 center svelte-1vg7szd"><div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div> <div class="center flex_1 svelte-1vg7szd"><!> <br/> <div class="special_font"> </div></div></div>'),yt=b('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),xt=b('<h2>Concludi combattimento</h2> Sei sicuro di voler concludere il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si concludi</button> <button class="glass"><!> No continua</button></div>',1),St=b('<div class="flex"><button class="glass"><img src="/icons/sushi.png" alt=""/> Annulla Combattimento</button> <button class="glass"><img src="/icons/sushi.png" alt=""/> Concludi Combattimento</button></div> <div class="flex"><div class="glass center svelte-1vg7szd">Turno iniziato il &nbsp;<b> </b>&nbsp;alle&nbsp;<b> </b></div></div> <!> <!> <!> <!>',1);function Tt(o,r){X(r,!1);let t=j({players:[]}),g=j({data:"--/--/--",ora:"00:00"});rt(()=>{if(!localStorage.getItem("fight"))F("/");else{const n=localStorage.getItem("fight");D(t,n?JSON.parse(n):null),D(g,ut(e(t).start_time)),(!e(t).players.every(c=>c.username!="")||!e(t).players.length)&&F("/")}}),V();var h=St(),_=J(h),p=a(_);p.__click=[pt];var L=i(p,2);L.__click=[ft],s(_);var I=i(_,2),A=a(I),y=i(a(A)),M=a(y,!0);s(y);var C=i(y,2),N=a(C,!0);s(C),s(A),s(I);var z=i(I,2);{var E=n=>{var c=bt(),v=a(c);R(v,{get count(){return e(t).players[0].pieces},set count(m){W(t,e(t).players[0].pieces=m)},$$events:{valueischanged:m=>localStorage.setItem("fight",JSON.stringify(e(t)))},$$legacy:!0});var u=i(v,4),l=a(u,!0);s(u),s(c),q(()=>k(l,e(t).players[0].username)),f(n,c)};G(z,n=>{e(t).players.length==1&&n(E)})}var x=i(z,2);{var O=n=>{var c=ht(),v=a(c),u=a(v);R(u,{imageWidth:"150px",get count(){return e(t).players[0].pieces},set count(T){W(t,e(t).players[0].pieces=T)},$$events:{valueischanged:T=>localStorage.setItem("fight",JSON.stringify(e(t)))},$$legacy:!0});var l=i(u,4),m=a(l,!0);s(l),s(v);var d=i(v,2),S=a(d);R(S,{imageWidth:"150px",get count(){return e(t).players[1].pieces},set count(T){W(t,e(t).players[1].pieces=T)},$$events:{valueischanged:T=>localStorage.setItem("fight",JSON.stringify(e(t)))},$$legacy:!0});var $=i(S,4),et=a($,!0);s($),s(d),s(c),q(()=>{k(m,e(t).players[0].username),k(et,e(t).players[1].username)}),f(n,c)};G(x,n=>{e(t).players.length==2&&n(O)})}var K=i(x,2);U(K,{name:"annulla",children:(n,c)=>{var v=yt(),u=i(J(v),5),l=a(u);l.__click=[_t];var m=a(l);w(m,{n:3}),P(),s(l);var d=i(l,2);d.__click=function(...$){B?.apply(this,$)};var S=a(d);w(S,{n:5}),P(),s(d),s(u),f(n,v)},$$slots:{default:!0}});var tt=i(K,2);U(tt,{name:"concludi",children:(n,c)=>{var v=xt(),u=i(J(v),5),l=a(u);l.__click=[mt,t];var m=a(l);w(m,{n:3}),P(),s(l);var d=i(l,2);d.__click=function(...$){B?.apply(this,$)};var S=a(d);w(S,{n:5}),P(),s(d),s(u),f(n,v)},$$slots:{default:!0}}),q(()=>{k(M,e(g).data),k(N,e(g).ora)}),f(o,h),Y()}it(["click"]);export{Tt as component};
