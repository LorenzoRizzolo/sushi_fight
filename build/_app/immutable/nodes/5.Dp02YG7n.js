import"../chunks/DsnmJJEf.js";import{i as fe}from"../chunks/DDgjhNLN.js";import{b as ce,h as N,a as de,B as C,_ as ae,r as _e,H as me,s as Q,c as Z,d as J,k as H,ah as he,ai as pe,f as U,i as ge,g as R,aj as be,e as ye,A as re,ak as j,al as te,am as Ee,an as xe,j as ne,p as Ie,ao as Se,ap as ke,aq as L,ar as le,as as Ae,at as we,au as Ce,av as Te,X as Ne,aw as Me,ax as Oe,a0 as Re,ay as $e,az as He,w as De,l as Pe,x as ze,m as V,o as X,y as I,n as A,t as z,u as Ve,z as Be,v as M,C as S,aA as qe}from"../chunks/BA1ZpzL_.js";import{r as Je}from"../chunks/B7HN3fJf.js";import{g as B}from"../chunks/CHttDz5j.js";import{S as O,O as se,P as ee,C as W,R as Le}from"../chunks/DJnbM7KC.js";function Xe(a,r){return r}function Ye(a,r,e){for(var u=a.items,v=[],s=r.length,c=0;c<s;c++)we(r[c].e,v,!0);var _=s>0&&v.length===0&&e!==null;if(_){var h=e.parentNode;Ce(h),h.append(e),u.clear(),k(a,r[0].prev,r[s-1].next)}Te(v,()=>{for(var y=0;y<s;y++){var p=r[y];_||(u.delete(p.k),k(a,p.prev,p.next)),le(p.e,!_)}})}function Fe(a,r,e,u,v,s=null){var c=a,_={flags:r,items:new Map,first:null};N&&de();var h=null,y=!1,p=new Map,w=ae(()=>{var t=e();return Ee(t)?t:t==null?[]:te(t)}),n,g;function l(){Ke(g,n,_,p,c,v,r,u,e),s!==null&&(n.length===0?h?ne(h):h=U(()=>s(c)):h!==null&&Ie(h,()=>{h=null}))}ce(()=>{g??=Ne,n=C(w);var t=n.length;if(y&&t===0)return;y=t===0;let d=!1;if(N){var b=_e(c)===me;b!==(t===0)&&(c=Q(),Z(c),J(!1),d=!0)}if(N){for(var f=null,i,o=0;o<t;o++){if(H.nodeType===he&&H.data===pe){c=H,d=!0,J(!1);break}var m=n[o],E=u(m,o);i=G(H,_,f,null,m,E,o,v,r,e),_.items.set(E,i),f=i}t>0&&Z(Q())}if(N)t===0&&s&&(h=U(()=>s(c)));else if(ge()){var D=new Set,T=R;for(o=0;o<t;o+=1){m=n[o],E=u(m,o);var x=_.items.get(E)??p.get(E);x?ie(x,m,o):(i=G(null,_,null,null,m,E,o,v,r,e,!0),p.set(E,i)),D.add(E)}for(const[P,$]of _.items)D.has(P)||T.skipped_effects.add($.e);T.add_callback(l)}else l();d&&J(!0),C(w)}),N&&(c=H)}function Ke(a,r,e,u,v,s,c,_,h){var y=r.length,p=e.items,w=e.first,n=w,g,l=null,t=[],d=[],b,f,i,o;for(o=0;o<y;o+=1){if(b=r[o],f=_(b,o),i=p.get(f),i===void 0){var m=u.get(f);if(m!==void 0){u.delete(f),p.set(f,m);var E=l?l.next:n;k(e,l,m),k(e,m,E),Y(m,E,v),l=m}else{var D=n?n.e.nodes_start:v;l=G(D,e,l,l===null?e.first:l.next,b,f,o,s,c,h)}p.set(f,l),t=[],d=[],n=l.next;continue}if(ie(i,b,o),(i.e.f&L)!==0&&ne(i.e),i!==n){if(g!==void 0&&g.has(i)){if(t.length<d.length){var T=d[0],x;l=T.prev;var P=t[0],$=t[t.length-1];for(x=0;x<t.length;x+=1)Y(t[x],T,v);for(x=0;x<d.length;x+=1)g.delete(d[x]);k(e,P.prev,$.next),k(e,l,P),k(e,$,T),n=T,l=$,o-=1,t=[],d=[]}else g.delete(i),Y(i,n,v),k(e,i.prev,i.next),k(e,i,l===null?e.first:l.next),k(e,l,i),l=i;continue}for(t=[],d=[];n!==null&&n.k!==f;)(n.e.f&L)===0&&(g??=new Set).add(n),d.push(n),n=n.next;if(n===null)continue;i=n}t.push(i),l=i,n=i.next}if(n!==null||g!==void 0){for(var q=g===void 0?[]:te(g);n!==null;)(n.e.f&L)===0&&q.push(n),n=n.next;var oe=q.length;if(oe>0){var ve=null;Ye(e,q,ve)}}a.first=e.first&&e.first.e,a.last=l&&l.e;for(var ue of u.values())le(ue.e);u.clear()}function ie(a,r,e,u){be(a.v,r),a.i=e}function G(a,r,e,u,v,s,c,_,h,y,p){var w=(h&Se)!==0,n=(h&ke)===0,g=w?n?re(v,!1,!1):j(v):v,l=(h&xe)===0?c:j(c),t={i:l,v:g,k:s,a:null,e:null,prev:e,next:u};try{if(a===null){var d=document.createDocumentFragment();d.append(a=ye())}return t.e=U(()=>_(a,g,l,y),N),t.e.prev=e&&e.e,t.e.next=u&&u.e,e===null?p||(r.first=t):(e.next=t,e.e.next=t.e),u!==null&&(u.prev=t,u.e.prev=t.e),t}finally{}}function Y(a,r,e){for(var u=a.next?a.next.e.nodes_start:e,v=r?r.e.nodes_start:e,s=a.e.nodes_start;s!==null&&s!==u;){var c=Ae(s);v.before(s),s=c}}function k(a,r,e){r===null?a.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function Ue(a,r,e=r){var u=new WeakSet;Me(a,"input",async v=>{var s=v?a.defaultValue:a.value;if(s=F(a)?K(s):s,e(s),R!==null&&u.add(R),await Oe(),s!==(s=r())){var c=a.selectionStart,_=a.selectionEnd;a.value=s??"",_!==null&&(a.selectionStart=c,a.selectionEnd=Math.min(_,a.value.length))}}),(N&&a.defaultValue!==a.value||Re(r)==null&&a.value)&&(e(F(a)?K(a.value):a.value),R!==null&&u.add(R)),$e(()=>{var v=r();if(a===document.activeElement){var s=He??R;if(u.has(s))return}F(a)&&v===K(a.value)||a.type==="date"&&!v&&!a.value||v!==a.value&&(a.value=v??"")})}function F(a){var r=a.type;return r==="number"||r==="range"}function K(a){return a===""?null:+a}function We(){B("/number_fighter")}function Ge(){W(),B("/")}function Qe(a,r){C(r).players.every(e=>e.username!="")?(localStorage.setItem("fight",JSON.stringify(C(r))),B("/fight")):se("error")}var Ze=()=>se("annulla"),je=V('<div class="flex fighter svelte-ct5v22"><div class="glass icon svelte-ct5v22"><!></div> <input type="text" placeholder="username..." class="svelte-ct5v22"/></div>'),ea=V('<h2>Annulla combattimento</h2> Sei sicuro di voler annullare il combattimento? <br/><br/> <div class="flex"><button class="glass"><!> Si Annulla</button> <button class="glass"><!> No continua</button></div>',1),aa=V('Completa tutti i nomi prima di iniziare! <br/><br/> <div class="flex"><button class="glass"><!> OK</button></div>',1),ra=V('<div class="flex"><button class="glass"><!> Cambia numero partecipanti</button> <button class="glass"><!> Annulla</button></div> <div class="title"><h2>Inserisci i nomi dei partecipanti</h2></div> <!> <br/> <div class="center"><button class="glass big special_font svelte-ct5v22"><img src="/icons/sushi.png" alt=""/> Inizia a Combattere</button></div> <!> <!>',1);function va(a,r){Pe(r,!1);let e=re([]);ze(()=>{if(!localStorage.getItem("fight"))B("/");else{const l=localStorage.getItem("fight");Be(e,l?JSON.parse(l):null)}}),fe();var u=ra(),v=X(u),s=I(v);s.__click=[We];var c=I(s);O(c,{n:1}),M(),S(s);var _=A(s,2);_.__click=[Ze];var h=I(_);O(h,{n:2}),M(),S(_),S(v);var y=A(v,4);Fe(y,1,()=>C(e).players,Xe,(l,t,d)=>{var b=je(),f=I(b),i=I(f);{let m=ae(Le);O(i,{get n(){return C(m)}})}S(f);var o=A(f,2);Je(o),S(b),Ue(o,()=>C(e).players[d].username,m=>qe(e,C(e).players[d].username=m)),z(l,b)});var p=A(y,4),w=I(p);w.__click=[Qe,e],S(p);var n=A(p,2);ee(n,{name:"annulla",children:(l,t)=>{var d=ea(),b=A(X(d),5),f=I(b);f.__click=[Ge];var i=I(f);O(i,{n:3}),M(),S(f);var o=A(f,2);o.__click=function(...E){W?.apply(this,E)};var m=I(o);O(m,{n:5}),M(),S(o),S(b),z(l,d)},$$slots:{default:!0}});var g=A(n,2);ee(g,{name:"error",children:(l,t)=>{M();var d=aa(),b=A(X(d),4),f=I(b);f.__click=function(...o){W?.apply(this,o)};var i=I(f);O(i,{n:5}),M(),S(f),S(b),z(l,d)},$$slots:{default:!0}}),z(a,u),Ve()}De(["click"]);export{va as component};
